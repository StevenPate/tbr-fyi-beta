<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>TBR.fyi Manual Regression Tests</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">TBR.fyi Manual Regression Tests</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#manual-regression-testing-procedures"
id="toc-manual-regression-testing-procedures">Manual Regression Testing
Procedures</a>
<ul>
<li><a href="#quick-reference-which-tests-to-run"
id="toc-quick-reference-which-tests-to-run">Quick Reference: Which Tests
to Run</a></li>
<li><a href="#pre-test-setup-checklist"
id="toc-pre-test-setup-checklist">Pre-Test Setup Checklist</a></li>
<li><a href="#smoke-test-run-after-every-change"
id="toc-smoke-test-run-after-every-change">1. Smoke Test (Run After
Every Change)</a></li>
<li><a href="#web-ui-regression-suite"
id="toc-web-ui-regression-suite">2. Web UI Regression Suite</a>
<ul>
<li><a href="#homepage-tests" id="toc-homepage-tests">2.1 Homepage
Tests</a></li>
<li><a href="#shelf-page-tests" id="toc-shelf-page-tests">2.2 Shelf Page
Tests</a></li>
<li><a href="#add-book-modal-tests" id="toc-add-book-modal-tests">2.3
Add Book Modal Tests</a></li>
<li><a href="#book-management-tests" id="toc-book-management-tests">2.4
Book Management Tests</a></li>
<li><a href="#shelf-management-tests"
id="toc-shelf-management-tests">2.5 Shelf Management Tests</a></li>
<li><a href="#export-tests" id="toc-export-tests">2.6 Export
Tests</a></li>
<li><a href="#share-book-tests" id="toc-share-book-tests">2.7 Share Book
Tests</a></li>
<li><a href="#feedback-modal-tests" id="toc-feedback-modal-tests">2.8
Feedback Modal Tests</a></li>
</ul></li>
<li><a href="#sms-flow-regression-suite"
id="toc-sms-flow-regression-suite">3. SMS Flow Regression Suite</a>
<ul>
<li><a href="#user-lifecycle-commands"
id="toc-user-lifecycle-commands">3.1 User Lifecycle Commands</a></li>
<li><a href="#add-book-via-isbn" id="toc-add-book-via-isbn">3.2 Add Book
via ISBN</a></li>
<li><a href="#add-book-via-amazon-link"
id="toc-add-book-via-amazon-link">3.3 Add Book via Amazon Link</a></li>
<li><a href="#add-book-via-photo-mms"
id="toc-add-book-via-photo-mms">3.4 Add Book via Photo (MMS)</a></li>
<li><a href="#titleauthor-search-1" id="toc-titleauthor-search-1">3.5
Title/Author Search</a></li>
<li><a href="#note-capture-flow" id="toc-note-capture-flow">3.6 Note
Capture Flow</a></li>
<li><a href="#multi-book-context-add-command"
id="toc-multi-book-context-add-command">3.7 Multi-Book Context (ADD
command)</a></li>
</ul></li>
<li><a href="#api-endpoint-tests" id="toc-api-endpoint-tests">4. API
Endpoint Tests</a>
<ul>
<li><a href="#book-endpoints" id="toc-book-endpoints">4.1 Book
Endpoints</a></li>
<li><a href="#shelf-endpoints" id="toc-shelf-endpoints">4.2 Shelf
Endpoints</a></li>
<li><a href="#export-endpoints" id="toc-export-endpoints">4.3 Export
Endpoints</a></li>
</ul></li>
<li><a href="#database-state-verification"
id="toc-database-state-verification">5. Database State Verification</a>
<ul>
<li><a href="#books-table" id="toc-books-table">Books Table</a></li>
<li><a href="#shelves-table" id="toc-shelves-table">Shelves
Table</a></li>
<li><a href="#book-shelf-relationships"
id="toc-book-shelf-relationships">Book-Shelf Relationships</a></li>
<li><a href="#sms-context" id="toc-sms-context">SMS Context</a></li>
</ul></li>
<li><a href="#full-regression-checklist"
id="toc-full-regression-checklist">6. Full Regression Checklist</a>
<ul>
<li><a href="#build-compile" id="toc-build-compile">Build &amp;
Compile</a></li>
<li><a href="#core-web-functionality"
id="toc-core-web-functionality">Core Web Functionality</a></li>
<li><a href="#export-share" id="toc-export-share">Export &amp;
Share</a></li>
<li><a href="#sms-flows" id="toc-sms-flows">SMS Flows</a></li>
<li><a href="#integrations" id="toc-integrations">Integrations</a></li>
<li><a href="#error-handling" id="toc-error-handling">Error
Handling</a></li>
</ul></li>
<li><a href="#test-data-reference" id="toc-test-data-reference">7. Test
Data Reference</a>
<ul>
<li><a href="#sample-isbns" id="toc-sample-isbns">Sample ISBNs</a></li>
<li><a href="#test-user-cleanup" id="toc-test-user-cleanup">Test User
Cleanup</a></li>
</ul></li>
<li><a href="#regression-test-log-template"
id="toc-regression-test-log-template">8. Regression Test Log
Template</a></li>
<li><a href="#quick-commands-reference"
id="toc-quick-commands-reference">Quick Commands Reference</a></li>
</ul></li>
</ul>
</nav>
<h1 id="manual-regression-testing-procedures">Manual Regression Testing
Procedures</h1>
<blockquote>
<p><strong>Purpose</strong>: Step-by-step testing procedures to verify
TBR.fyi functionality after implementing fixes or changes. Use these
scripts to gain confidence that nothing has been broken.</p>
</blockquote>
<hr />
<h2 id="quick-reference-which-tests-to-run">Quick Reference: Which Tests
to Run</h2>
<table>
<thead>
<tr>
<th>Change Type</th>
<th>Required Tests</th>
</tr>
</thead>
<tbody>
<tr>
<td>Bug fix in specific feature</td>
<td>Smoke Test + Related Feature Section</td>
</tr>
<tr>
<td>UI/Component changes</td>
<td>Smoke Test + Web UI Full Suite</td>
</tr>
<tr>
<td>API endpoint changes</td>
<td>Smoke Test + API Tests + Related UI</td>
</tr>
<tr>
<td>SMS flow changes</td>
<td>Smoke Test + SMS Full Suite</td>
</tr>
<tr>
<td>Database schema changes</td>
<td>Full Regression Suite</td>
</tr>
<tr>
<td>Dependency updates</td>
<td>Full Regression Suite</td>
</tr>
<tr>
<td>Pre-deployment</td>
<td>Full Regression Suite</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="pre-test-setup-checklist">Pre-Test Setup Checklist</h2>
<p>Before running any tests, ensure:</p>
<ul class="task-list">
<li><label><input type="checkbox" />Dev server running:
<code>npm run dev</code></label></li>
<li><label><input type="checkbox" /><code>.env</code> file has all
required variables</label></li>
<li><label><input type="checkbox" />Browser DevTools console open (to
catch JS errors)</label></li>
<li><label><input type="checkbox" />Network tab open (to monitor API
calls)</label></li>
<li><label><input type="checkbox" />Test phone number exists in database
(for SMS tests, use ngrok: <code>npm run dev:tunnel</code>)</label></li>
</ul>
<hr />
<h2 id="smoke-test-run-after-every-change">1. Smoke Test (Run After
Every Change)</h2>
<p><strong>Time: ~2 minutes</strong></p>
<p>This quick test catches critical regressions:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Terminal 1: Type checks</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run check</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Terminal 2: Build verification</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run build</span></code></pre></div>
<p><strong>Browser Quick Check:</strong></p>
<ol type="1">
<li><label><input type="checkbox" />Open
<code>http://localhost:5173</code> - Homepage loads without
errors</label></li>
<li><label><input type="checkbox" />Click “View your bookshelf” or
navigate to a known user route</label></li>
<li><label><input type="checkbox" />Verify shelf page loads with books
visible</label></li>
<li><label><input type="checkbox" />Open browser console - no red
errors</label></li>
</ol>
<p><strong>Pass Criteria</strong>: All checks pass, no console errors,
pages render.</p>
<hr />
<h2 id="web-ui-regression-suite">2. Web UI Regression Suite</h2>
<h3 id="homepage-tests">2.1 Homepage Tests</h3>
<p><strong>Route</strong>: <code>http://localhost:5173/</code></p>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 21%" />
<col style="width: 45%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Load homepage</td>
<td>Page renders with carousel, QR code visible</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Check localStorage hint</td>
<td>If returning user, “Continue to your library” link appears</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Scan QR code (phone)</td>
<td>Resolves to Twilio number (+1 360-504-4327)</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Click “About” in nav</td>
<td>About page loads</td>
<td>[ ]</td>
</tr>
<tr>
<td>5</td>
<td>Click “Help” in nav</td>
<td>Help/FAQ page loads</td>
<td>[ ]</td>
</tr>
<tr>
<td>6</td>
<td>Open browser console</td>
<td>No JavaScript errors</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="shelf-page-tests">2.2 Shelf Page Tests</h3>
<p><strong>Route</strong>:
<code>http://localhost:5173/[your-identifier]</code></p>
<p>Use your phone number (e.g., <code>+15551234567</code>) or username
as identifier.</p>
<h4 id="navigation-view-modes">Navigation &amp; View Modes</h4>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 21%" />
<col style="width: 45%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Load shelf page</td>
<td>Page loads, books display</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Click “Grid” view toggle</td>
<td>Books display as flip cards</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Click “List” view toggle</td>
<td>Books display as horizontal cards with details</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Refresh page</td>
<td>View mode persists within session</td>
<td>[ ]</td>
</tr>
<tr>
<td>5</td>
<td>Click shelf tabs</td>
<td>Books filter to selected shelf</td>
<td>[ ]</td>
</tr>
<tr>
<td>6</td>
<td>Click “All Books”</td>
<td>All books display regardless of shelf</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<h4 id="search-filter-cmdk-or-click-search">Search &amp; Filter (Cmd+K
or click search)</h4>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 21%" />
<col style="width: 45%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Press Cmd+K (or Ctrl+K)</td>
<td>Search bar focuses</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Type book title</td>
<td>Results filter in real-time</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Type author name</td>
<td>Results filter to author matches</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Clear search</td>
<td>All books return</td>
<td>[ ]</td>
</tr>
<tr>
<td>5</td>
<td>Use “Read” dropdown filter</td>
<td>Only read (or unread) books show</td>
<td>[ ]</td>
</tr>
<tr>
<td>6</td>
<td>Use “Owned” dropdown filter</td>
<td>Only owned (or not owned) books show</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="add-book-modal-tests">2.3 Add Book Modal Tests</h3>
<p><strong>Trigger</strong>: Click <code>+</code> button or press
<code>+</code>/<code>=</code> key</p>
<h4 id="isbn-input">ISBN Input</h4>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 21%" />
<col style="width: 45%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Open modal</td>
<td>Modal appears with input field</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Enter ISBN-13: <code>9780140449136</code></td>
<td>Book detected (The Brothers Karamazov)</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Enter ISBN-10: <code>0140449132</code></td>
<td>Same book detected</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Select shelf from dropdown</td>
<td>Shelf highlighted</td>
<td>[ ]</td>
</tr>
<tr>
<td>5</td>
<td>Click “Add”</td>
<td>Book added, toast appears, modal closes</td>
<td>[ ]</td>
</tr>
<tr>
<td>6</td>
<td>Verify in book list</td>
<td>New book appears on selected shelf</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<h4 id="amazon-url-input">Amazon URL Input</h4>
<table>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Open modal</td>
<td>Modal appears</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Paste full Amazon URL</td>
<td>ISBN extracted, book detected</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Paste short a.co URL</td>
<td>ISBN extracted, book detected</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Add book</td>
<td>Book added successfully</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<p><strong>Test URLs</strong> (use current Amazon links): - Full:
<code>https://www.amazon.com/dp/0140449132</code> - Short:
<code>https://a.co/d/xxxxxxx</code> (get a real short link)</p>
<h4 id="titleauthor-search">Title/Author Search</h4>
<table>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Open modal</td>
<td>Modal appears</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Type: <code>1984 by George Orwell</code></td>
<td>Book suggestions appear</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Select a result</td>
<td>Book details populate</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Add book</td>
<td>Book added successfully</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<h4 id="imagebarcode-upload">Image/Barcode Upload</h4>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 21%" />
<col style="width: 45%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Open modal</td>
<td>Modal appears</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Drag barcode image onto modal</td>
<td>Upload triggered, detection starts</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Wait for detection</td>
<td>Book(s) detected, shown as selectable</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Toggle selection on one book</td>
<td>Selection state changes</td>
<td>[ ]</td>
</tr>
<tr>
<td>5</td>
<td>Click “Add”</td>
<td>Selected books added</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<p><strong>Test Images</strong>: Use photos of book barcodes from your
library.</p>
<hr />
<h3 id="book-management-tests">2.4 Book Management Tests</h3>
<h4 id="readowned-toggles">Read/Owned Toggles</h4>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 21%" />
<col style="width: 45%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Find a book in list view</td>
<td>Book card visible</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Click “Read” badge</td>
<td>Badge toggles state (filled/outline)</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Refresh page</td>
<td>Read state persisted</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Click “Owned” badge</td>
<td>Badge toggles state</td>
<td>[ ]</td>
</tr>
<tr>
<td>5</td>
<td>Refresh page</td>
<td>Owned state persisted</td>
<td>[ ]</td>
</tr>
<tr>
<td>6</td>
<td>Check network tab</td>
<td>POST to <code>/api/books/update</code> returns 200</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<h4 id="notes">Notes</h4>
<table>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Find a book, expand details</td>
<td>Note input field visible</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Enter a note</td>
<td>Text appears in field</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Click outside (blur)</td>
<td>Note saves</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Refresh page</td>
<td>Note persisted</td>
<td>[ ]</td>
</tr>
<tr>
<td>5</td>
<td>Clear note and blur</td>
<td>Note removed</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<h4 id="book-deletion">Book Deletion</h4>
<table>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Find a book</td>
<td>Book visible</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Click delete/trash icon</td>
<td>Confirmation appears</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Confirm deletion</td>
<td>Book removed from list</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Check database</td>
<td>Book record deleted</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="shelf-management-tests">2.5 Shelf Management Tests</h3>
<h4 id="create-shelf">Create Shelf</h4>
<table>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Click “+” next to shelves (or “New Shelf”)</td>
<td>Input appears</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Enter unique name: <code>Test Shelf</code></td>
<td>Name accepted</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Submit</td>
<td>Shelf created, appears in list</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Try duplicate name</td>
<td>Error message shows</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<h4 id="assign-book-to-shelf">Assign Book to Shelf</h4>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 21%" />
<col style="width: 45%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Find a book</td>
<td>Book visible</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Open shelf assignment menu</td>
<td>Shelf list appears with checkboxes</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Check a shelf</td>
<td>Book assigned (immediate UI update)</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Navigate to that shelf</td>
<td>Book appears there</td>
<td>[ ]</td>
</tr>
<tr>
<td>5</td>
<td>Uncheck the shelf</td>
<td>Book removed from shelf</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<h4 id="delete-shelf">Delete Shelf</h4>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 21%" />
<col style="width: 45%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Navigate to test shelf</td>
<td>Shelf is active</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Click delete shelf button</td>
<td>Confirmation dialog appears</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Confirm</td>
<td>Shelf deleted, redirect to “All Books”</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Check books</td>
<td>Books still exist (only shelf assignment removed)</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="export-tests">2.6 Export Tests</h3>
<p><strong>Route</strong>:
<code>http://localhost:5173/[identifier]/settings</code> or use export
buttons</p>
<table>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Click JSON export</td>
<td><code>.json</code> file downloads</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Open file</td>
<td>Valid JSON with book data</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Click CSV export</td>
<td><code>.csv</code> file downloads</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Open in spreadsheet</td>
<td>Proper columns, Goodreads compatible</td>
<td>[ ]</td>
</tr>
<tr>
<td>5</td>
<td>Export specific shelf</td>
<td>Only that shelf’s books included</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="share-book-tests">2.7 Share Book Tests</h3>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 21%" />
<col style="width: 45%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Click share icon on a book</td>
<td>Share modal opens</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Copy link</td>
<td>URL copied to clipboard</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Open link in incognito</td>
<td>Book displays publicly (read-only)</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Try to modify</td>
<td>No edit controls visible</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="feedback-modal-tests">2.8 Feedback Modal Tests</h3>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 21%" />
<col style="width: 45%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr>
<th>Step</th>
<th>Action</th>
<th>Expected Result</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Click feedback FAB (floating button)</td>
<td>Modal opens</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Enter feedback text</td>
<td>Text accepted</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Toggle screenshot option</td>
<td>Screenshot captured (if enabled)</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Submit</td>
<td>Success message, modal closes</td>
<td>[ ]</td>
</tr>
<tr>
<td>5</td>
<td>Check Trello board</td>
<td>Card created with feedback</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="sms-flow-regression-suite">3. SMS Flow Regression Suite</h2>
<p><strong>Prerequisites</strong>: - ngrok tunnel running:
<code>npm run dev:tunnel</code> - Twilio webhook pointing to tunnel URL
+ <code>/api/sms</code> - Test phone with SMS capability</p>
<h3 id="user-lifecycle-commands">3.1 User Lifecycle Commands</h3>
<table style="width:100%;">
<colgroup>
<col style="width: 10%" />
<col style="width: 17%" />
<col style="width: 33%" />
<col style="width: 28%" />
<col style="width: 10%" />
</colgroup>
<thead>
<tr>
<th>Step</th>
<th>SMS Sent</th>
<th>Expected Response</th>
<th>Database State</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>STOP</code></td>
<td>Opt-out confirmation</td>
<td><code>opted_out=true</code></td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td><code>START</code></td>
<td>Welcome message with instructions</td>
<td><code>opted_out=false</code>, <code>has_started=true</code>, default
shelf created</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td><code>HELP</code></td>
<td>Instructions for adding books</td>
<td>No change</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="add-book-via-isbn">3.2 Add Book via ISBN</h3>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 20%" />
<col style="width: 38%" />
<col style="width: 16%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th>Step</th>
<th>SMS Sent</th>
<th>Expected Response</th>
<th>Verify</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>9780140449136</code></td>
<td>“Added: The Brothers Karamazov by Fyodor Dostoyevsky” (or
similar)</td>
<td>Book in database, on default shelf</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td><code>0140449132</code> (ISBN-10)</td>
<td>Book added confirmation</td>
<td>ISBN-13 stored in database</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Invalid ISBN: <code>1234567890123</code></td>
<td>Error message</td>
<td>No book added</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Duplicate ISBN</td>
<td>“Already in your library” or similar</td>
<td>No duplicate created</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="add-book-via-amazon-link">3.3 Add Book via Amazon Link</h3>
<table>
<thead>
<tr>
<th>Step</th>
<th>SMS Sent</th>
<th>Expected Response</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Full Amazon URL</td>
<td>Book added with title/author</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Short <code>a.co</code> URL</td>
<td>Book added with title/author</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Invalid Amazon URL</td>
<td>Error/guidance message</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="add-book-via-photo-mms">3.4 Add Book via Photo (MMS)</h3>
<table>
<thead>
<tr>
<th>Step</th>
<th>MMS Sent</th>
<th>Expected Response</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Clear barcode photo</td>
<td>Book(s) detected and added</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Photo with multiple barcodes</td>
<td>Multiple books detected</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Blurry/unreadable photo</td>
<td>“Couldn’t detect” message</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Non-barcode image</td>
<td>Helpful error message</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="titleauthor-search-1">3.5 Title/Author Search</h3>
<table>
<thead>
<tr>
<th>Step</th>
<th>SMS Sent</th>
<th>Expected Response</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>1984 by George Orwell</code></td>
<td>Book match found, confirmation</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td><code>The Great Gatsby</code></td>
<td>Best match returned</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Vague/ambiguous title</td>
<td>Multiple options or best guess</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Nonsense text</td>
<td>Helpful error message</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="note-capture-flow">3.6 Note Capture Flow</h3>
<table>
<thead>
<tr>
<th>Step</th>
<th>SMS Sent</th>
<th>Expected Response</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Add a book (ISBN)</td>
<td>Book added, note prompt offered</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>Send note text</td>
<td>Note saved to book</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>Verify in web UI</td>
<td>Note visible on book</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td>Send <code>no</code> or skip</td>
<td>Context cleared, no note</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="multi-book-context-add-command">3.7 Multi-Book Context (ADD
command)</h3>
<table>
<thead>
<tr>
<th>Step</th>
<th>SMS Sent</th>
<th>Expected Response</th>
<th>Pass</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>ADD</code></td>
<td>“Ready for multiple books” acknowledgment</td>
<td>[ ]</td>
</tr>
<tr>
<td>2</td>
<td>ISBN #1</td>
<td>Book added, waiting for more</td>
<td>[ ]</td>
</tr>
<tr>
<td>3</td>
<td>ISBN #2</td>
<td>Book added, waiting for more</td>
<td>[ ]</td>
</tr>
<tr>
<td>4</td>
<td><code>DONE</code> or empty</td>
<td>Summary of books added</td>
<td>[ ]</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="api-endpoint-tests">4. API Endpoint Tests</h2>
<p>Run these with cURL or a REST client. Replace placeholders with real
values.</p>
<h3 id="book-endpoints">4.1 Book Endpoints</h3>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test: Detect ISBN</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-X</span> POST http://localhost:5173/api/books/detect <span class="dt">\</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">&quot;Content-Type: application/json&quot;</span> <span class="dt">\</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">-d</span> <span class="st">&#39;{&quot;input&quot;:&quot;9780140449136&quot;}&#39;</span> <span class="kw">|</span> <span class="ex">jq</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected: Book metadata returned</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Test: Add book (need valid referer)</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-X</span> POST http://localhost:5173/api/books/add <span class="dt">\</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">&quot;Content-Type: application/json&quot;</span> <span class="dt">\</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">&quot;Referer: http://localhost:5173/+15551234567&quot;</span> <span class="dt">\</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">-d</span> <span class="st">&#39;{&quot;isbn&quot;:&quot;9780547928227&quot;}&#39;</span> <span class="kw">|</span> <span class="ex">jq</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected: 200 OK, book added</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Test: Update book status</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-X</span> POST http://localhost:5173/api/books/update <span class="dt">\</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">&quot;Content-Type: application/json&quot;</span> <span class="dt">\</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">&quot;Referer: http://localhost:5173/+15551234567&quot;</span> <span class="dt">\</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">-d</span> <span class="st">&#39;{&quot;id&quot;:&quot;BOOK_UUID_HERE&quot;,&quot;is_read&quot;:true}&#39;</span> <span class="kw">|</span> <span class="ex">jq</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected: 200 OK</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Test: Delete book</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-X</span> POST http://localhost:5173/api/books/delete <span class="dt">\</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">&quot;Content-Type: application/json&quot;</span> <span class="dt">\</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">&quot;Referer: http://localhost:5173/+15551234567&quot;</span> <span class="dt">\</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">-d</span> <span class="st">&#39;{&quot;id&quot;:&quot;BOOK_UUID_HERE&quot;}&#39;</span> <span class="kw">|</span> <span class="ex">jq</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected: 200 OK</span></span></code></pre></div>
<h3 id="shelf-endpoints">4.2 Shelf Endpoints</h3>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test: Create shelf</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-X</span> POST http://localhost:5173/api/shelves <span class="dt">\</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">&quot;Content-Type: application/json&quot;</span> <span class="dt">\</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">-d</span> <span class="st">&#39;{&quot;user_id&quot;:&quot;+15551234567&quot;,&quot;name&quot;:&quot;API Test Shelf&quot;}&#39;</span> <span class="kw">|</span> <span class="ex">jq</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected: 200 OK, shelf created</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Test: Delete shelf</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-X</span> DELETE http://localhost:5173/api/shelves <span class="dt">\</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">&quot;Content-Type: application/json&quot;</span> <span class="dt">\</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">-d</span> <span class="st">&#39;{&quot;id&quot;:&quot;SHELF_UUID_HERE&quot;}&#39;</span> <span class="kw">|</span> <span class="ex">jq</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected: 200 OK</span></span></code></pre></div>
<h3 id="export-endpoints">4.3 Export Endpoints</h3>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test: JSON export</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="st">&quot;http://localhost:5173/api/export?identifier=+15551234567&quot;</span> <span class="kw">|</span> <span class="ex">jq</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected: JSON array of books</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Test: CSV export</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="st">&quot;http://localhost:5173/api/export/csv?identifier=+15551234567&quot;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected: CSV formatted text</span></span></code></pre></div>
<hr />
<h2 id="database-state-verification">5. Database State Verification</h2>
<p>After running tests, verify database state in Supabase:</p>
<h3 id="books-table">Books Table</h3>
<div class="sourceCode" id="cb5"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Check recent books</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">id</span>, isbn13, title, is_read, is_owned, note, source_type, added_at</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> books</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> user_id <span class="op">=</span> <span class="st">&#39;+15551234567&#39;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> added_at <span class="kw">DESC</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<h3 id="shelves-table">Shelves Table</h3>
<div class="sourceCode" id="cb6"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Check user&#39;s shelves</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">id</span>, name, created_at</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> shelves</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> user_id <span class="op">=</span> <span class="st">&#39;+15551234567&#39;</span>;</span></code></pre></div>
<h3 id="book-shelf-relationships">Book-Shelf Relationships</h3>
<div class="sourceCode" id="cb7"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Check shelf assignments</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> b.title, s.name <span class="kw">as</span> shelf_name</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> book_shelves bs</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> books b <span class="kw">ON</span> bs.book_id <span class="op">=</span> b.<span class="kw">id</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> shelves s <span class="kw">ON</span> bs.shelf_id <span class="op">=</span> s.<span class="kw">id</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> b.user_id <span class="op">=</span> <span class="st">&#39;+15551234567&#39;</span>;</span></code></pre></div>
<h3 id="sms-context">SMS Context</h3>
<div class="sourceCode" id="cb8"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Check SMS context state</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> sms_context <span class="kw">WHERE</span> user_id <span class="op">=</span> <span class="st">&#39;+15551234567&#39;</span>;</span></code></pre></div>
<hr />
<h2 id="full-regression-checklist">6. Full Regression Checklist</h2>
<p>Use this for pre-deployment or after significant changes:</p>
<h3 id="build-compile">Build &amp; Compile</h3>
<ul class="task-list">
<li><label><input type="checkbox" /><code>npm run check</code>
passes</label></li>
<li><label><input type="checkbox" /><code>npm run build</code>
passes</label></li>
<li><label><input type="checkbox" />No TypeScript errors</label></li>
<li><label><input type="checkbox" />No Svelte warnings</label></li>
</ul>
<h3 id="core-web-functionality">Core Web Functionality</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Homepage renders</label></li>
<li><label><input type="checkbox" />Shelf page loads</label></li>
<li><label><input type="checkbox" />Add book modal works (ISBN, Amazon,
image, search)</label></li>
<li><label><input type="checkbox" />Read/Owned toggles
persist</label></li>
<li><label><input type="checkbox" />Notes persist</label></li>
<li><label><input type="checkbox" />Book deletion works</label></li>
<li><label><input type="checkbox" />Shelf creation works</label></li>
<li><label><input type="checkbox" />Shelf deletion works (with
redirect)</label></li>
<li><label><input type="checkbox" />Search filters books</label></li>
<li><label><input type="checkbox" />Grid/List toggle works</label></li>
<li><label><input type="checkbox" />Barcode renders in list
view</label></li>
</ul>
<h3 id="export-share">Export &amp; Share</h3>
<ul class="task-list">
<li><label><input type="checkbox" />JSON export downloads valid
file</label></li>
<li><label><input type="checkbox" />CSV export downloads valid
file</label></li>
<li><label><input type="checkbox" />Share link works in
incognito</label></li>
</ul>
<h3 id="sms-flows">SMS Flows</h3>
<ul class="task-list">
<li><label><input type="checkbox" />START creates
user/shelf</label></li>
<li><label><input type="checkbox" />STOP opts out user</label></li>
<li><label><input type="checkbox" />HELP returns
instructions</label></li>
<li><label><input type="checkbox" />ISBN adds book</label></li>
<li><label><input type="checkbox" />Amazon URL adds book</label></li>
<li><label><input type="checkbox" />Photo adds book(s)</label></li>
<li><label><input type="checkbox" />Title search finds book</label></li>
<li><label><input type="checkbox" />Note capture saves note</label></li>
</ul>
<h3 id="integrations">Integrations</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Google Books metadata
fetches</label></li>
<li><label><input type="checkbox" />Google Vision barcode detection
works</label></li>
<li><label><input type="checkbox" />Feedback reaches Trello</label></li>
</ul>
<h3 id="error-handling">Error Handling</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Invalid ISBN shows
error</label></li>
<li><label><input type="checkbox" />Network timeout handled
gracefully</label></li>
<li><label><input type="checkbox" />Duplicate book
prevented</label></li>
<li><label><input type="checkbox" />Rate limiting works (if
applicable)</label></li>
</ul>
<hr />
<h2 id="test-data-reference">7. Test Data Reference</h2>
<h3 id="sample-isbns">Sample ISBNs</h3>
<table>
<thead>
<tr>
<th>ISBN-13</th>
<th>ISBN-10</th>
<th>Title</th>
</tr>
</thead>
<tbody>
<tr>
<td>9780140449136</td>
<td>0140449132</td>
<td>The Brothers Karamazov</td>
</tr>
<tr>
<td>9780547928227</td>
<td>0547928227</td>
<td>The Hobbit</td>
</tr>
<tr>
<td>9780061120084</td>
<td>0061120081</td>
<td>To Kill a Mockingbird</td>
</tr>
<tr>
<td>9780451524935</td>
<td>0451524934</td>
<td>1984</td>
</tr>
<tr>
<td>9780743273565</td>
<td>0743273567</td>
<td>The Great Gatsby</td>
</tr>
</tbody>
</table>
<h3 id="test-user-cleanup">Test User Cleanup</h3>
<p>After testing, clean up test data:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Remove test books (be careful!)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">DELETE</span> <span class="kw">FROM</span> books</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> user_id <span class="op">=</span> <span class="st">&#39;+15551234567&#39;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">AND</span> title <span class="kw">LIKE</span> <span class="st">&#39;%Test%&#39;</span>;</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Remove test shelves</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="kw">DELETE</span> <span class="kw">FROM</span> shelves</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> user_id <span class="op">=</span> <span class="st">&#39;+15551234567&#39;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="kw">AND</span> name <span class="kw">LIKE</span> <span class="st">&#39;%Test%&#39;</span>;</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">-- Clear SMS context</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="kw">DELETE</span> <span class="kw">FROM</span> sms_context</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> user_id <span class="op">=</span> <span class="st">&#39;+15551234567&#39;</span>;</span></code></pre></div>
<hr />
<h2 id="regression-test-log-template">8. Regression Test Log
Template</h2>
<p>Copy this for each test session:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## Regression Test Session</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>**Date**: YYYY-MM-DD</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>**Tester**: <span class="co">[</span><span class="ot">Name</span><span class="co">]</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>**Change Tested**: <span class="co">[</span><span class="ot">Brief description of fix/change</span><span class="co">]</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>**Branch**: <span class="co">[</span><span class="ot">Branch name</span><span class="co">]</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="fu">### Tests Run</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="va">[ ]</span> Smoke Test</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="va">[ ]</span> Web UI Suite</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="va">[ ]</span> SMS Suite</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="va">[ ]</span> API Tests</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="va">[ ]</span> Full Regression</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="fu">### Results</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Test Area <span class="pp">|</span> Status <span class="pp">|</span> Notes <span class="pp">|</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="pp">|-----------|--------|-------|</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Build <span class="pp">|</span> PASS/FAIL <span class="pp">|</span> <span class="pp">|</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Homepage <span class="pp">|</span> PASS/FAIL <span class="pp">|</span> <span class="pp">|</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Shelf Page <span class="pp">|</span> PASS/FAIL <span class="pp">|</span> <span class="pp">|</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Add Book <span class="pp">|</span> PASS/FAIL <span class="pp">|</span> <span class="pp">|</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Toggles <span class="pp">|</span> PASS/FAIL <span class="pp">|</span> <span class="pp">|</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Shelves <span class="pp">|</span> PASS/FAIL <span class="pp">|</span> <span class="pp">|</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Export <span class="pp">|</span> PASS/FAIL <span class="pp">|</span> <span class="pp">|</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> SMS <span class="pp">|</span> PASS/FAIL <span class="pp">|</span> <span class="pp">|</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="fu">### Issues Found</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span><span class="co">[</span><span class="ot">Issue description</span><span class="co">]</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="fu">### Sign-off</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="va">[ ]</span> Ready for deployment</span></code></pre></div>
<hr />
<h2 id="quick-commands-reference">Quick Commands Reference</h2>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Start dev server</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run dev</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Start with ngrok tunnel (for SMS testing)</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run dev:tunnel</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Type checking</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run check</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Production build test</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run build</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Database access</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="ex">npx</span> supabase db remote login</span></code></pre></div>
</body>
</html>
